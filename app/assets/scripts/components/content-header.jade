content-header
  header.content_header
    .content_header_list
      hgroup
        ul#cart-list
          li(each="{ item, idx in titles}") { item }
    .content_header_sidewalk
      .content_header_action
        .content_header_action_box
          a.button.filled(href="javascript:void(0);") { buttonText }

  content-header-alert

  script.
    var self = this;
    self.titles = [''];
    self.buttonText = '';

    this.on('mount update unmount', function(eventName) {
      oiMediator.publish('content-header event', eventName);
    });

    changeTitle = function(newTitles){
      self.titles = newTitles;
      self.update();

      oiMediator.publish('content-header changedTitle', { titleChanged: self.titles });
    };

    changeButtonText = function(newButton){
      self.buttonText = newButton;
      self.update();

      oiMediator.publish('content-header changedButton', { buttonChanged: self.buttonText });
    };

    updateHeader = function(toUpdate){
      changeTitle(toUpdate.title);
      changeButtonText(toUpdate.button);

      oiMediator.publish('content-header changedHeader', { headerChanged: toUpdate });
    };

    oiMediator.subscribe('content-header updateTitle', changeTitle);
    oiMediator.subscribe('content-header updateButton', changeButtonText);

    oiMediator.subscribe('content-header updateHeader', updateHeader);
