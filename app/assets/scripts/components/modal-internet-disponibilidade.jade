modal-internet-disponibilidade
  .modal.modal-green(show="{visible}")

    .modal_column-left
      header.modal_header
        .modal_header_logo
        h1.modal_header_title consulta de cobertura

    .modal_column-right
      main.modal_container

        .modal_container_row
          h5 Já tem um fixo da Oi?
          form#form-consulta-de-cobertura

            .modal_container_half-left
              fieldset
                .field-box.round-all.last-line.text
                  label DDD + Fixo da Oi
                  input(type='text', name='ddd-fixo-da-oi')

            .modal_container_half-right
              button.basic Consulte a disponibilidade

        .modal_container_row
          h5 Não tem um Telefone Fixo ainda?
          button.basic Fale com um especialista

    a.modal_close(href="javascript:void(0);", onclick="{ close }") Fechar

  script.
    var self = this;
    self.visible = false;
    self.added = false;

    /**
     * native riot method
     *
     * dispacth events via oiMediator to any point needed on entire system
     * 
     * **/
    this.on('mount update unmount', function(eventName) {
      oiMediator.publish('modal-internet-disponibilidade event', eventName);
    });

    self.open = function() {
      $('body').addClass('scroll-lock');
      self.visible = true;
      self.update();
      oiMediator.publish( 'modal open', {type: 'plano internet disponibilidade'} );
    };

    self.close = function() {
      $('body').removeClass('scroll-lock');
      self.visible = false;
      self.update();
      oiMediator.publish( 'modal close', {type: 'plano internet disponibilidade'} );
    };

    self.add = function() {
      self.textAdd = 'Adicionado';
      oiMediator.publish( 'voz-total add' );
      self.added = true;
      self.update();
      self.close();
    };

    self.remove = function() {
      self.textAdd = 'Adicionar';
      self.added = false;
      self.update();
      oiMediator.publish( 'voz-total remove' );
    };

    document.onkeydown = function(evt) {
      evt = evt || window.event;
      if (evt.keyCode == 27) { // Esc
        self.close();
      }
    };

    $('body').on('click', '#consulte-a-disponibilidade', function(evt){
      evt.preventDefault();
      self.open();
    });
